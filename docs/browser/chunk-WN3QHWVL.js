import{a as L}from"./chunk-N6Z5AHIL.js";import{c as B}from"./chunk-36LHHEJI.js";import{a as I}from"./chunk-TGCUYJZT.js";import{a as w,b as H}from"./chunk-3WDAKNUP.js";import{f as S,h as k}from"./chunk-GJZBK6SI.js";import"./chunk-ZSSD5RUB.js";import{a as E,f as T}from"./chunk-PMXNRM6D.js";import{a as x,c as b}from"./chunk-YDOAFTVS.js";import{a as O,b as P}from"./chunk-VMK7JVKO.js";import"./chunk-R62S3IJH.js";import{Cb as C,Eb as m,Ob as c,Qb as g,Ta as i,Ya as d,db as f,fa as h,ga as y,hb as l,nc as u,ob as a,oc as M,rc as v,tb as r,ub as o,vb as p,zb as _}from"./chunk-J7T7TGAC.js";function F(e,n){e&1&&(r(0,"div",3),p(1,"mat-spinner"),o())}function j(e,n){e&1&&(r(0,"div",7)(1,"p"),c(2,"No history yet. Quotes you view will appear here."),o()())}function N(e,n){if(e&1&&(r(0,"span",13),c(1),o()),e&2){let t=m().$implicit;i(),g(" Tags: ",t.tags.join(", ")," ")}}function q(e,n){if(e&1&&(r(0,"mat-card",8),p(1,"app-quote",9),r(2,"div",10)(3,"span",11),c(4),o(),l(5,N,2,1,"span",12),o()()),e&2){let t=n.$implicit,s=m(2);i(),a("quote",t.content)("author",t.author||"Unknown")("isLoading",!1),i(3),g("Viewed: ",s.formatDate(t.viewedAt),""),i(),a("ngIf",t.tags==null?null:t.tags.length)}}function z(e,n){if(e&1){let t=_();r(0,"div",14)(1,"button",15),C("click",function(){h(t);let A=m(2);return y(A.clearHistory())}),r(2,"mat-icon"),c(3,"delete"),o(),c(4),o()()}if(e&2){let t=m(2);i(),a("disabled",t.isLoading),i(3),g(" ",t.isLoading?"Clearing...":"Clear All History"," ")}}function V(e,n){if(e&1&&(r(0,"div"),l(1,j,3,0,"div",4)(2,q,6,5,"mat-card",5)(3,z,5,2,"div",6),o()),e&2){let t=m();i(),a("ngIf",t.history.length===0),i(),a("ngForOf",t.history),i(),a("ngIf",t.history.length>0)}}var D=class e{constructor(n,t,s){this.historyService=n;this.authService=t;this.snackBar=s}history=[];isLoading=!1;ngOnInit(){this.loadHistory()}loadHistory(){this.isLoading=!0,this.historyService.getHistory().subscribe({next:n=>{this.history=n.sort((t,s)=>new Date(s.viewedAt).getTime()-new Date(t.viewedAt).getTime()),this.isLoading=!1},error:n=>{console.error("Error loading history:",n),this.snackBar.open("Failed to load history","Close",{duration:3e3}),this.isLoading=!1}})}clearHistory(){confirm("Are you sure you want to clear your entire quote history?")&&(this.isLoading=!0,this.historyService.clearHistory().subscribe({next:()=>{this.history=[],this.isLoading=!1,this.snackBar.open("History cleared successfully!","Close",{duration:3e3})},error:n=>{console.error("Error clearing history:",n),this.snackBar.open("Failed to clear history. Please try again.","Close",{duration:5e3}),this.isLoading=!1},complete:()=>{this.loadHistory()}}))}formatDate(n){let t={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(n).toLocaleString(void 0,t)}static \u0275fac=function(t){return new(t||e)(d(L),d(k),d(S))};static \u0275cmp=f({type:e,selectors:[["app-history"]],decls:5,vars:2,consts:[[1,"history-container"],["class","loading-spinner",4,"ngIf"],[4,"ngIf"],[1,"loading-spinner"],["class","empty-state",4,"ngIf"],["class","history-item",4,"ngFor","ngForOf"],["class","actions",4,"ngIf"],[1,"empty-state"],[1,"history-item"],[3,"quote","author","isLoading"],[1,"history-meta"],[1,"viewed-at"],["class","tags",4,"ngIf"],[1,"tags"],[1,"actions"],["mat-raised-button","","color","warn",3,"click","disabled"]],template:function(t,s){t&1&&(r(0,"div",0)(1,"h1"),c(2,"Your Quote History"),o(),l(3,F,2,0,"div",1)(4,V,4,3,"div",2),o()),t&2&&(i(3),a("ngIf",s.isLoading),i(),a("ngIf",!s.isLoading))},dependencies:[v,u,M,T,E,B,b,x,P,O,H,w,I],styles:['.history-container[_ngcontent-%COMP%]{padding:2rem;max-width:800px;margin:0 auto;min-height:80vh}.history-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#27a737;text-align:center;margin-bottom:2rem;font-size:2rem;font-weight:500;position:relative}.history-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:after{content:"";display:block;width:100px;height:3px;background:#ff5722;margin:.5rem auto 0}.history-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:2rem}.history-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#525252;font-size:1.5rem;font-weight:500}.dark-mode[_nghost-%COMP%]   .history-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .history-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{color:#f5f5f5}.history-container[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]{background:#f5f5f5cc;border-left:4px solid #27a737;padding:1.5rem;margin-bottom:1.5rem;border-radius:0 4px 4px 0;transition:all .3s ease;box-shadow:0 2px 5px #0000001a}.dark-mode[_nghost-%COMP%]   .history-container[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .history-container[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]{color:#f5f5f5;background-color:#1e1e1ecc}.history-container[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 5px 15px #0000001a}.history-container[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-meta[_ngcontent-%COMP%]{margin-top:1rem;text-align:right;font-size:.9rem;color:#525252}.dark-mode[_nghost-%COMP%]   .history-container[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-meta[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .history-container[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-meta[_ngcontent-%COMP%]{color:#f5f5f5}.history-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:2rem}.history-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.dark-mode[_nghost-%COMP%]   .history-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .history-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#27a737cc;color:#f5f5f5}@media screen and (max-width: 768px){.history-container[_ngcontent-%COMP%]{padding:1rem}.history-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.history-container[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]{padding:1rem}}']})};export{D as HistoryComponent};
