import{a as L}from"./chunk-ZWEYPV5C.js";import{a as T}from"./chunk-WUPVASHL.js";import{a as E}from"./chunk-7PCFJKZR.js";import{a as H}from"./chunk-V3WOTRWT.js";import"./chunk-YWMSNX76.js";import{h as I}from"./chunk-CHGJPQKV.js";import{i as w,l as F}from"./chunk-UAYMLOSD.js";import{a as Q,b as k}from"./chunk-4HYKBLAP.js";import"./chunk-DVR3QCDE.js";import{Bb as d,Cb as g,Mb as c,Nb as y,Ob as O,Ta as a,Ya as m,db as p,fa as _,ga as C,hb as v,nc as P,ob as l,oc as x,qb as b,rc as S,tb as n,ub as i,vb as u,zb as M}from"./chunk-Q4SROSCT.js";var f=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=p({type:r,selectors:[["app-search"]],decls:4,vars:0,consts:[["action","https://www.google.com/search","method","GET","target","_blank"],["type","text","name","q","placeholder","Search Google..."],["type","submit"]],template:function(e,o){e&1&&(n(0,"form",0),u(1,"input",1),n(2,"button",2),c(3,"Search"),i()())},styles:["form[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:2rem 0;flex-wrap:wrap;gap:1rem}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.8rem;width:30rem;border:1px solid #666;border-radius:4px}@media screen and (max-width: 768px){form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.8rem 1.1rem;margin-left:.8rem;background-color:#27a737;color:#f5f5f5;border:none;border-radius:4px;cursor:pointer}"]})};function N(r,t){if(r&1){let e=M();n(0,"div",10),d("click",function(){let s=_(e).$implicit,h=g(2);return C(h.selectCategory(s))}),c(1),i()}if(r&2){let e=t.$implicit,o=g(2);b("active",o.selectedCategory===e),a(),O(" ",e," ")}}function R(r,t){if(r&1&&(n(0,"div",8),v(1,N,2,3,"div",9),i()),r&2){let e=g();a(),l("ngForOf",e.categories)}}var j=class r{constructor(t,e,o,s){this.authService=t;this.quoteService=e;this.favoriteService=o;this.historyService=s;this.authService.currentUser$.subscribe(h=>{this.currentUser=h}),this.fetchRandomQuote()}categories=["motivational","inspirational","success","happiness","wisdom","love","friendship","life"];selectedCategory=null;currentUser;currentQuote=this.getDefaultQuote();isLoading=!1;getDefaultQuote(){return{_id:"default",content:"Click a category to get started",author:"",tags:[]}}selectCategory(t){if(this.selectedCategory===t){this.selectedCategory=null,this.fetchRandomQuote();return}this.selectedCategory=t,this.isLoading=!0,this.quoteService.getRandomQuoteByCategory(t).subscribe({next:e=>{this.currentQuote=e,this.isLoading=!1},error:()=>{this.currentQuote=this.quoteService.getFallbackQuote(),this.isLoading=!1}})}fetchRandomQuote(){this.isLoading=!0,this.quoteService.getRandomQuote().subscribe({next:t=>this.handleNewQuote(t),error:()=>{this.currentQuote=this.quoteService.getFallbackQuote(),this.isLoading=!1}})}refreshQuote(){this.selectedCategory?this.selectCategory(this.selectedCategory):this.fetchRandomQuote()}toggleFavorite(){this.currentQuote.favorited?this.favoriteService.removeFavorite(this.currentQuote._id).subscribe(()=>{this.currentQuote.favorited=!1}):this.favoriteService.addFavorite(this.currentQuote).subscribe(()=>{this.currentQuote.favorited=!0})}shareQuote(){let t=`"${this.currentQuote.content}" - ${this.currentQuote.author}`,e=`https://twitter.com/intent/tweet?text=${encodeURIComponent(t)}`;window.open(e,"_blank")}handleNewQuote(t){this.currentQuote=t,this.authService.isAuthenticated()&&this.historyService.addToHistory(t).subscribe(),this.isLoading=!1}static \u0275fac=function(e){return new(e||r)(m(I),m(L),m(T),m(E))};static \u0275cmp=p({type:r,selectors:[["app-home"]],decls:17,vars:6,consts:[[1,"home-container"],[1,"content-container"],[3,"quote","author","isLoading"],[1,"action-buttons"],["mat-icon-button","",3,"click","color"],["mat-icon-button","",3,"click"],[1,"categories-title"],["class","categories-container",4,"ngIf"],[1,"categories-container"],["class","category-pill",3,"active","click",4,"ngFor","ngForOf"],[1,"category-pill",3,"click"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1),u(2,"app-quote",2),n(3,"div",3)(4,"button",4),d("click",function(){return o.toggleFavorite()}),n(5,"mat-icon"),c(6),i()(),n(7,"button",5),d("click",function(){return o.shareQuote()}),n(8,"mat-icon"),c(9,"share"),i()(),n(10,"button",5),d("click",function(){return o.refreshQuote()}),n(11,"mat-icon"),c(12,"refresh"),i()()(),u(13,"app-search"),n(14,"h1",6),c(15,"Categories"),i(),v(16,R,2,1,"div",7),i()()),e&2&&(a(2),l("quote",o.currentQuote.content||"")("author",o.currentQuote.author||"Unknown")("isLoading",o.isLoading),a(2),l("color",o.currentQuote.favorited?"warn":""),a(2),y(o.currentQuote.favorited?"favorite":"favorite_border"),a(10),l("ngIf",o.currentUser))},dependencies:[S,P,x,H,f,F,w,k,Q],styles:[".home-container[_ngcontent-%COMP%]{position:relative;margin-top:5rem;width:60%;padding:2rem;margin-left:auto;margin-right:auto;background-color:#f5f5f5cc;color:#f5f5f5;border-radius:8px;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);z-index:10;box-shadow:0 4px 20px #00000026}.dark-mode[_nghost-%COMP%]   .home-container[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .home-container[_ngcontent-%COMP%]{background-color:#1e1e1ecc;color:#f5f5f5}.home-container[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;color:#27a737}.home-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%}.home-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .categories-title[_ngcontent-%COMP%]{text-align:center;margin:1.5rem 0;font-size:1.3rem;font-weight:600;color:#27a737}.home-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .categories-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:.8rem;margin:1rem auto;padding:0 1rem}.home-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .category-pill[_ngcontent-%COMP%]{padding:.6rem 1.2rem;background-color:#27a7371a;border-radius:2rem;cursor:pointer;transition:all .2s ease;font-size:.9rem;color:#27a737;border:1px solid rgba(39,167,55,.3)}.home-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .category-pill[_ngcontent-%COMP%]:hover{background-color:#27a73733;transform:translateY(-2px)}.home-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .category-pill.active[_ngcontent-%COMP%]{background-color:#27a737;color:#fff;font-weight:500;box-shadow:0 2px 8px #27a7374d}@media screen and (max-width: 576px){.home-container[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:auto;width:90%}}.dark-mode[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]{background-color:#1e1e1e99;color:#f5f5f5}.dark-mode[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .category-pill[_ngcontent-%COMP%]{background-color:#27a73733;color:#47d458;border-color:#27a73766}.dark-mode[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .category-pill[_ngcontent-%COMP%]:hover{background-color:#27a7374d}.dark-mode[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .category-pill.active[_ngcontent-%COMP%]{background-color:#27a737;color:#1e1e1e}"]})};export{j as HomeComponent};
