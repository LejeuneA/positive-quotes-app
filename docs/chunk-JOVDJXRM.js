import{a as j,b as A,d as V,e as H,f as z,g as Y}from"./chunk-56V4OUTK.js";import{a as S,b as x}from"./chunk-YWMSNX76.js";import{b as h,f as w,g as P,h as L}from"./chunk-CMVS2VEW.js";import{a as F,b as y,c as O,f as E,g as k,h as l,j as I,k as N,l as q,n as g,o as T,p as B,q as G,r as R,t as D}from"./chunk-2OEI7E2A.js";import{k as v,l as b}from"./chunk-U4RRIZVV.js";import"./chunk-DVR3QCDE.js";import{Bb as C,Mb as s,Ta as a,Ya as p,db as u,hb as d,ob as m,oc as M,rc as _,tb as i,ub as n,vb as c}from"./chunk-Q4SROSCT.js";function J(r,e){r&1&&(i(0,"mat-error"),s(1,"Email is required"),n())}function K(r,e){r&1&&(i(0,"mat-error"),s(1,"Invalid email format"),n())}function Q(r,e){r&1&&(i(0,"mat-error"),s(1,"Password is required"),n())}function U(r,e){r&1&&(i(0,"mat-error"),s(1," Password must be at least 6 characters "),n())}function W(r,e){r&1&&(i(0,"span"),s(1,"Login"),n())}function X(r,e){r&1&&c(0,"mat-spinner",8)}var $=class r{constructor(e,o,t){this.authService=e;this.router=o;this.snackBar=t}loginForm=new q({email:new g("",[l.required,l.email]),password:new g("",[l.required,l.minLength(6)])});isLoading=!1;onLogin(e){if(this.loginForm.invalid||this.isLoading)return;this.isLoading=!0;let{email:o,password:t}=this.loginForm.value;this.authService.login(o,t).subscribe({next:()=>{this.isLoading=!1,this.showSnackbar("Login successful!","success"),e?.resetForm()},error:f=>{this.isLoading=!1,this.handleLoginError(f),this.loginForm.get("password")?.reset()}})}showSnackbar(e,o){this.snackBar.open(e,"Close",{duration:5e3,panelClass:[`snackbar-${o}`],verticalPosition:"top"})}handleLoginError(e){console.error("Login error:",e);let o="Login failed - please try again later";e.status===0?o="Network error - please check your connection":e.status===401?o="Invalid email or password":e.status>=400&&e.status<500&&(o="Invalid request - please check your input"),this.showSnackbar(o,"error")}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}static \u0275fac=function(o){return new(o||r)(p(L),p(h),p(w))};static \u0275cmp=u({type:r,selectors:[["app-login"]],decls:20,vars:8,consts:[[1,"container"],[1,"login-form",3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","type","email","formControlName","email","required",""],[4,"ngIf"],["matInput","","type","password","formControlName","password","required",""],["mat-raised-button","","type","submit","color","primary",3,"disabled"],["diameter","24",4,"ngIf"],["diameter","24"]],template:function(o,t){o&1&&(i(0,"mat-card",0)(1,"mat-card-title"),s(2,"Login"),n(),i(3,"mat-card-content")(4,"form",1),C("ngSubmit",function(){return t.onLogin()}),i(5,"mat-form-field",2)(6,"mat-label"),s(7,"Email"),n(),c(8,"input",3),d(9,J,2,0,"mat-error",4)(10,K,2,0,"mat-error",4),n(),i(11,"mat-form-field",2)(12,"mat-label"),s(13,"Password"),n(),c(14,"input",5),d(15,Q,2,0,"mat-error",4)(16,U,2,0,"mat-error",4),n(),i(17,"button",6),d(18,W,2,0,"span",4)(19,X,1,0,"mat-spinner",7),n()()()()),o&2&&(a(4),m("formGroup",t.loginForm),a(5),m("ngIf",t.email==null?null:t.email.hasError("required")),a(),m("ngIf",t.email==null?null:t.email.hasError("email")),a(5),m("ngIf",t.password==null?null:t.password.hasError("required")),a(),m("ngIf",t.password==null?null:t.password.hasError("minlength")),a(),m("disabled",t.loginForm.invalid||t.isLoading),a(),m("ngIf",!t.isLoading),a(),m("ngIf",t.isLoading))},dependencies:[_,M,E,F,O,y,H,V,j,A,Y,z,b,v,D,T,k,I,N,R,B,G,P,x,S],styles:[".container[_ngcontent-%COMP%]{width:90%;max-width:400px;min-height:450px;margin:2rem auto;padding:2rem;border-radius:12px;box-shadow:0 4px 20px #0000001a;background-color:#f5f5f5cc;display:flex;flex-direction:column;justify-content:center;transition:all .3s ease}.container[_ngcontent-%COMP%]:hover{box-shadow:0 6px 24px #00000026}.dark-mode[_nghost-%COMP%]   .container[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .container[_ngcontent-%COMP%]{background-color:#1e1e1ecc;color:#f5f5f5}.container[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{color:#27a737;font-size:2rem;font-weight:600;margin-bottom:2rem;text-align:center}.login-form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:1.5rem}.login-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.login-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:0}.login-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   .mat-form-field-outline[_ngcontent-%COMP%]{background-color:#fff;border-radius:4px}.login-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{margin-top:1rem;padding:.75rem;background-color:#27a737cc;color:#f5f5f5;font-weight:500;font-size:1rem;border-radius:4px;transition:all .2s ease;text-transform:uppercase;letter-spacing:.5px}.login-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#23712b;transform:translateY(-2px)}.login-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:active{transform:translateY(0)}@media screen and (max-width: 768px){.container[_ngcontent-%COMP%]{width:95%;padding:1.5rem;margin:1rem auto}}@media screen and (max-width: 576px){.container[_ngcontent-%COMP%]{width:100%;padding:1rem;margin:0 auto}}"]})};export{$ as LoginComponent};
